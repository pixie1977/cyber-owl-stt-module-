# cyber-owl-stt-module-
# ๐๏ธ Cyber Owl STT โ ะัะปะฐะนะฝ-ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ัะตัะธ ะฝะฐ ััััะบะพะผ ัะทัะบะต
ะะพะดัะปั ะดะปั ะบะธะฑะตััะพะฒั ะฟะพ ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ัะตัะธ ั web-ะบะพะฝัะพะปัั
ะัะพััะพะน ัะตัะฒะตั ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ัะตัะธ (Speech-to-Text, STT) ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ **Vosk**, ัะฐะฑะพัะฐััะธะน ะฟะพะปะฝะพัััั ะฒ ะพัะปะฐะนะฝะต. ะะพะดะดะตัะถะธะฒะฐะตั ะฟะพัะพะบะพะฒะพะต ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธะต ั ะผะธะบัะพัะพะฝะฐ ะธ ะฟัะตะดะพััะฐะฒะปัะตั HTTP API ะดะปั ะธะฝัะตะณัะฐัะธะธ.

---

## ๐ ะะฐะทะฝะฐัะตะฝะธะต

ะญัะพั ะฟัะพะตะบั ะฟะพะทะฒะพะปัะตั:
- ะะฐัะฟะพะทะฝะฐะฒะฐัั ัะตัั ั ะผะธะบัะพัะพะฝะฐ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ.
- ะะพะปััะฐัั ัะตะบัั ัะตัะตะท ะฟัะพััะพะต HTTP API.
- ะะฐะฑะพัะฐัั ะฑะตะท ะธะฝัะตัะฝะตัะฐ โ ะฒัั ะปะพะบะฐะปัะฝะพ.
- ะะฝัะตะณัะธัะพะฒะฐัััั ั ะดััะณะธะผะธ ัะธััะตะผะฐะผะธ (ัะฐั-ะฑะพัั, ะณะพะปะพัะพะฒัะต ะบะพะผะฐะฝะดั, ะฟัะพัะพะบะพะปะธัะพะฒะฐะฝะธะต ะธ ั.ะด.).

---

## ๐งฐ ะขะตัะฝะพะปะพะณะธะธ

- **FastAPI** โ ัะพะฒัะตะผะตะฝะฝัะน ััะตะนะผะฒะพัะบ ะดะปั ัะพะทะดะฐะฝะธั API.
- **Vosk** โ ะปะตะณะบะพะฒะตัะฝะฐั ะฑะธะฑะปะธะพัะตะบะฐ ะดะปั ะพัะปะฐะนะฝ-ัะฐัะฟะพะทะฝะฐะฒะฐะฝะธั ัะตัะธ.
- **sounddevice** โ ะดะพัััะฟ ะบ ะฐัะดะธะพะฒัะพะดั (ะผะธะบัะพัะพะฝั).
- **uvicorn** โ ะฒััะพะบะพะฟัะพะธะทะฒะพะดะธัะตะปัะฝัะน ASGI-ัะตัะฒะตั.
- **dotenv** โ ัะฟัะฐะฒะปะตะฝะธะต ะบะพะฝัะธะณััะฐัะธะตะน ัะตัะตะท `.env`.
- ะะพะปะฝะพัััั ะฝะฐ Python 3.8+.

---

## ๐ฆ ะฃััะฐะฝะพะฒะบะฐ

### 1. ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน


bash git clone https://github.com/yourusername/cyber-owl-stt.git cd cyber-owl-stt

### 2. ะกะพะทะดะฐะนัะต ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต
bash python -m venv venv source venv/bin/activate # Linux/macOS
ะธะปะธ
venv\Scripts\activate # Window

### 3. ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ
bash pip install -r requirements.txt

> โ๏ธ ะะฐ ะฝะตะบะพัะพััั ัะธััะตะผะฐั ะผะพะถะตั ะฟะพััะตะฑะพะฒะฐัััั ัััะฐะฝะพะฒะบะฐ `portaudio`:

bash

Ubuntu/Debian
sudo apt-get install portaudio19-dev python3-pyaudio

macOS
brew install portaudio

Windows โ ะพะฑััะฝะพ ะฝะต ััะตะฑัะตััั

### 4. ะกะบะฐัะฐะนัะต ะผะพะดะตะปั Vosk

ะกะบะฐัะฐะนัะต ััััะบัั ะผะพะดะตะปั ะธ ัะฐัะฟะฐะบัะนัะต ะตั ะฒ ะฟะฐะฟะบั `models/vosk-model-small-ru-0.22`:

๐ [https://alphacephei.com/vosk/models/vosk-model-small-ru-0.22.zip](https://alphacephei.com/vosk/models/vosk-model-small-ru-0.22.zip)

ะะปะธ ะฒัะฟะพะปะฝะธัะต:


bash mkdir -p models wget https://alphacephei.com/vosk/models/vosk-model-small-ru-0.22.zip -O models/vosk-model-small-ru-0.22.zip unzip models/vosk-model-small-ru-0.22.zip -d models/ mv models/vosk-model-small-ru-0.22 models/
---

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ:


.env
ะะฑัะทะฐัะตะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต
STT_USE_TORCH_MODEL_MANAGER_STR=false STT_PORT=8000 STT_HOST=127.0.0.1 STT_LOG_LEVEL=info

ะััั ะบ ะผะพะดะตะปะธ Vosk (ะฟะพ ัะผะพะปัะฐะฝะธั: models/vosk-model-small-ru-0.22)
STT_VOSK_MODEL_PATH=models/vosk-model-small-ru-0.22

ะะผั ะฐัะดะธะพััััะพะนััะฒะฐ (ะพะฟัะธะพะฝะฐะปัะฝะพ, ัะผ. ัะฟะธัะพะบ ะฝะธะถะต)
STT_SOUND_DEVICE_NAME=Microphone (Realtek Audio)

ะััั ะบ ััะฐัะธัะตัะบะธะผ ัะฐะนะปะฐะผ (HTML ะธะฝัะตััะตะนั)
STT_DOC_ROOT=content

ะััั ะบ ะฟัะธะผะตัะฐะผ ะณะพะปะพัะพะฒ (ะตัะปะธ ะธัะฟะพะปัะทััััั)
STT_SAMPLE_VOICES_PATH=resources/sample_voices

---
### ะะฐะบ ัะทะฝะฐัั ะธะผั ะฐัะดะธะพััััะพะนััะฒะฐ?

ะะฐะฟัััะธัะต ัะบัะธะฟั:


python import sounddevice as sd print(sd.query_devices())

ะะฐะนะดะธัะต ััััะพะนััะฒะพ ั `max_input_channels > 0` ะธ ะธัะฟะพะปัะทัะนัะต ะตะณะพ ะธะผั, ะฝะฐะฟัะธะผะตั:

env STT_SOUND_DEVICE_NAME=Microphone (USB Audio Device)
---

## ๐ฅ๏ธ ะะตะฑ-ะธะฝัะตััะตะนั

ะะพัะปะต ะทะฐะฟััะบะฐ ัะตัะฒะตัะฐ ะพัะบัะพะนัะต:

๐ [http://127.0.0.1:8000](http://127.0.0.1:8000)

ะั ัะฒะธะดะธัะต ะฟัะพััะพะน ะธะฝัะตััะตะนั ั ะบะฝะพะฟะบะฐะผะธ:
- **โถ๏ธ ะกัะฐัั** โ ะฝะฐัะธะฝะฐะตั ะฟัะพัะปััะธะฒะฐะฝะธะต ะผะธะบัะพัะพะฝะฐ.
- **โน๏ธ ะกัะพะฟ** โ ะพััะฐะฝะฐะฒะปะธะฒะฐะตั.
- ะัะต ัะฐัะฟะพะทะฝะฐะฝะฝัะต ััะฐะทั ะพัะพะฑัะฐะถะฐัััั ัะฒะตััั ั ะฒัะตะผะตะฝะฝะพะน ะผะตัะบะพะน.

---

## ๐ API ะญะฝะดะฟะพะธะฝัั

### `GET /`
- ะะพะทะฒัะฐัะฐะตั ะณะปะฐะฒะฝัั ัััะฐะฝะธัั (`index.html`).

### `GET /health`
- ะัะพะฒะตัะบะฐ ัะฐะฑะพัะพัะฟะพัะพะฑะฝะพััะธ.
- ะัะฒะตั:
  
json {"status": "ok", "service": "OK"}

### `GET /api/stt/latest`
- ะะพะทะฒัะฐัะฐะตั **ะฒัะต ะฝะฐะบะพะฟะปะตะฝะฝัะต** ัะฐัะฟะพะทะฝะฐะฝะฝัะต ััะฐะทั ะพะดะฝะพะน ัััะพะบะพะน ะธ ะพัะธัะฐะตั ะพัะตัะตะดั.
- ะัะฒะตั:
  
json {"text": "ะฟัะธะฒะตั ะบะฐะบ ะดะตะปะฐ"}

- ะัะปะธ ะฝะธัะตะณะพ ะฝะต ัะฐัะฟะพะทะฝะฐะฝะพ โ ะฒะตัะฝัั `{"text": ""}`.

> ๐ก ะญัะพั ัะฝะดะฟะพะธะฝั ะฟะพะปะตะทะตะฝ ะดะปั ะฟะตัะธะพะดะธัะตัะบะพะณะพ ะพะฟัะพัะฐ ะฝะพะฒัั ััะฐะท.

---

## โถ๏ธ ะะฐะฟััะบ


bash python app/main.py

ะะปะธ ะฝะฐะฟััะผัั:
bash uvicorn app.main:app --host 127.0.0.1 --port 8000 --reload

> โ ะกะตัะฒะตั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะฟััะบะฐะตั ัะพะฝะพะฒะพะต ะฟัะพัะปััะธะฒะฐะฝะธะต ะผะธะบัะพัะพะฝะฐ ะฟัะธ ััะฐััะต.

---

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ


---

## ๐๏ธ ะะฐะบ ัะฐะฑะพัะฐะตั

1. ะัะธ ััะฐััะต `main.py`:
   - ะะฐะณััะถะฐะตั ะบะพะฝัะธะณ.
   - ะกะพะทะดะฐัั ัะบะทะตะผะฟะปัั `Speech2Text`.
   - ะะฐะฟััะบะฐะตั ัะพะฝะพะฒัะน ะฟะพัะพะบ ะฟัะพัะปััะธะฒะฐะฝะธั.
   - ะะฐะฟััะบะฐะตั FastAPI-ัะตัะฒะตั.

2. `speech_to_text.Speech2Text.listen()`:
   - ะงะธัะฐะตั ะฐัะดะธะพ ั ะผะธะบัะพัะพะฝะฐ.
   - ะะตัะตะดะฐัั ะดะฐะฝะฝัะต ะฒ Vosk.
   - ะัะธ ัะฐัะฟะพะทะฝะฐะฝะธะธ โ ะพัะฟัะฐะฒะปัะตั ัะตะบัั ะฒ ะฐัะธะฝััะพะฝะฝัั ะพัะตัะตะดั.

3. HTTP API:
   - `GET /api/stt/latest` ะฒััะธััะฒะฐะตั ะฒัั ะพัะตัะตะดั ะธ ะฒะพะทะฒัะฐัะฐะตั ัะตะบัั ะพะดะฝะพะน ัััะพะบะพะน.

---

## ๐งช ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั


bash curl http://127.0.0.1:8000/api/stt/latest
โ {"text": "ะฟัะธะฒะตั ะผะธั"}
curl http://127.0.0.1:8000/api/stt/latest
โ {"text": ""}
---

## ๐ ะัะธะผะตัะฐะฝะธั

- ะะพะดะตะปั `vosk-model-small-ru-0.22` ะดะพััะฐัะพัะฝะพ ะฑััััะฐั ะธ ะฟะพะดัะพะดะธั ะดะปั ะพะฑัะธั ะทะฐะดะฐั.
- ะะปั ะปัััะตะณะพ ะบะฐัะตััะฒะฐ ะผะพะถะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั `vosk-model-ru-0.22`, ะฝะพ ะพะฝะฐ ััะตะฑัะตั ะฑะพะปััะต ะฟะฐะผััะธ.
- ะัะต ัะฐัะฟะพะทะฝะฐะฝะฝัะต ััะฐะทั ะพะฑัะตะดะธะฝััััั ัะตัะตะท ะฟัะพะฑะตะป โ ััะพ ัะดะพะฑะฝะพ ะดะปั ะพะฑัะฐะฑะพัะบะธ.
- ะัะพัะปััะธะฒะฐะฝะธะต ะทะฐะฟััะบะฐะตััั **ะฐะฒัะพะผะฐัะธัะตัะบะธ** ะฟัะธ ััะฐััะต ัะตัะฒะตัะฐ.

---

## ๐ ะะธัะตะฝะทะธั

MIT

ะัะพะตะบั ะธัะฟะพะปัะทัะตั [Vosk](https://github.com/alphacep/vosk-api), ะบะพัะพััะน ัะฐัะฟัะพัััะฐะฝัะตััั ะฟะพะด ัะพะฑััะฒะตะฝะฝะพะน ะปะธัะตะฝะทะธะตะน. ะฃะฑะตะดะธัะตัั, ััะพ ะฒั ัะพะณะปะฐัะฝั ั ะตั ััะปะพะฒะธัะผะธ.

---

## ๐ค ะะฒัะพั

Cyber Owl Team  
๐ง contact@cyber-owl.ru  
๐ฆ [Twitter @cyber_owl](https://twitter.com/cyber_owl)

---

> ๐ฏ ะะพะฒะพัะธัะต โ ะผั ัะปััะธะผ. ะะตะท ะพะฑะปะฐะบะฐ. ะะตะท ะพััะปะตะถะธะฒะฐะฝะธั.